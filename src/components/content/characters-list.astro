---
import Link from "@components/link.astro";
import type { ICharacter } from "@utils/ts/aniListApiTypes";

export interface Props {
  characters: ICharacter[];
}

const { characters } = Astro.props;
---

<div
  class="grid grid-cols-1 gap-4 pb-8 sm:grid-cols-2 lg:grid-cols-3 xxl:grid-cols-4">
  {
    characters.map((char) => (
      <div class="border-lightPurple flex flex-row gap-4 border-2">
        <img
          class="h-32 w-20 object-cover"
          alt={`imagem do personagem - ${char.node.name.full}`}
          src={char.node.image.large}
        />
        <div class="pt-2">
          <h2 class="text-2xl">
            {char.node.name?.first}
            {char.node.name?.last}
          </h2>
          <p class="italic">{char.role.toLowerCase()} character</p>
          {char.voiceActors.length ? (
            <p class="line-clamp-2">
              VA(s):
              {char.voiceActors.map((va, i) => (
                <>
                  <Link
                    isExternalHref={true}
                    text={`Link para a pÃ¡gina do VA - ${va.name.full} - no AniList`}
                    href={va.siteUrl}>
                    {va.name.full}
                  </Link>
                  {i !== char.voiceActors.length - 1 && ","}
                </>
              ))}
            </p>
          ) : null}
        </div>
      </div>
    ))
  }
</div>
